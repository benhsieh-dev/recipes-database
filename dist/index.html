<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta property="og:title" content="Recipes DB"><meta property="og:description" content="An app that searches thousands of recipes in wide raging categories."><meta name="image" property="og:image" content="https://benhsieh-dev.github.io/recipes-database/assets/Recipes-DB.jpg"><meta property="og:url" content="https://benhsieh-dev.github.io/recipes-database/"><script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" data-auto-a11y="true"></script><script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script><script>const firebaseConfig = {
            apiKey: "AIzaSyDm5HreoqHLeMO9-4c0HAWMEjjYkScCqfM",
            authDomain: "recipes-database-fb21c.firebaseapp.com",
            databaseURL: "https://recipes-database-fb21c.firebaseio.com/",
            projectId: "recipes-database-fb21c",
            storageBucket: "recipes-database-fb21c.appspot.com"
        };
        firebase.initializeApp(firebaseConfig);</script><script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><link rel="icon" type="image/x-icon" href="assets/favicon.ico"/><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>Recipes Database</title></head><body><div class="container"><div class="wrapper"><nav class="nav-bar"><form class="search"><input class="search_field" placeholder="Search recipes"> <button class="search_btn"><span>Search</span></button></form><button class="help_button">Help</button></nav></div><div class="modal modal--hidden"><div class="modal_contents"><div class="modal_close-bar"><span class="closeModal"><i class="fa fa-times-circle" aria-hidden="true"></i></span></div><p class="documentation">Enter search phrase into the search field. It can be anything recipe related such as "Manhattan", "Apple Pie", or "Avocado Soup."</p></div></div><h2 class="search_results_header"><span>Search Results</span></h2><div class="results"><div class="results_list"></div><div class="results_pages"></div></div><h2 class="favorites-header"><span>Favorite Recipes</span></h2><div class="favorites"></div><footer class="footer"><ul><li><a href="https://benhsieh-dev.github.io/" target="_blank"><i class="far fa-address-card"></i></a></li><li><a href="https://angel.co/u/ben-hsieh-6" target="_blank"><i class="fab fa-angellist"></i></a></li><li><a href="https://github.com/benhsieh-dev" target="_blank"><i class="fab fa-github"></i></a></li><li><a href="https://www.linkedin.com/in/ben-hsieh-05522542/" target="_blank"><i class="fab fa-linkedin-in"></i></a></li></ul></footer></div><script src="js/search-api.js"></script>
<script>
// COMPLETELY REPLACE the search functionality - don't load bundle.js for search
document.addEventListener('DOMContentLoaded', function() {
    console.log('Custom search system loaded');
    
    // Remove any existing event listeners by cloning the search form
    const searchForm = document.querySelector('.search');
    const newSearchForm = searchForm.cloneNode(true);
    searchForm.parentNode.replaceChild(newSearchForm, searchForm);
    
    // Add our custom search handler
    newSearchForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const query = document.querySelector('.search_field').value.trim();
        if (!query) return;
        
        console.log('Custom search triggered for:', query);
        
        // Show loading
        const resultsContainer = document.querySelector('.results_list');
        if (resultsContainer) {
            resultsContainer.innerHTML = '<div style="text-align:center; padding:20px;">Searching for recipes...</div>';
        }
        
        try {
            const results = await window.RecipeSearch.search(query);
            console.log('Got results:', results.length);
            
            // Clear and populate results
            if (resultsContainer) {
                resultsContainer.innerHTML = '';
                
                results.forEach((hit, idx) => {
                    const recipe = hit.recipe;
                    const card = `
                        <div class="card">
                            <img class="recipe_image" src="${recipe.image}" alt="${recipe.label}" onerror="this.src='https://via.placeholder.com/300x200?text=Recipe+Image'">
                            <div class="card_content">
                                <a class="results_link" href="${recipe.url}" target="_blank">
                                    <h4>${recipe.label}</h4>
                                </a>
                                <h4>Calories</h4>
                                <p>${Math.ceil(recipe.calories || 0)}</p>
                                <h4>Health Labels</h4>
                                <p>${(recipe.healthLabels || []).join(', ')}</p>
                                <h4>Ingredients</h4>
                                <p>${(recipe.ingredientLines || []).join(', ')}</p>
                                <h4>Source:</h4>
                                <p>${recipe.source || 'Unknown'}</p>
                            </div>
                        </div>
                    `;
                    resultsContainer.innerHTML += card;
                });
                
                // Clear search input
                document.querySelector('.search_field').value = '';
            }
        } catch (error) {
            console.error('Search failed:', error);
            if (resultsContainer) {
                resultsContainer.innerHTML = '<div style="text-align:center; padding:20px;">Search failed. Please try again.</div>';
            }
        }
    });
    
    // Handle modal functionality (from original bundle.js)
    const helpBtn = document.querySelector('.help_button');
    const modal = document.querySelector('.modal');
    const closeModal = document.querySelector('.closeModal');
    
    if (helpBtn) {
        helpBtn.addEventListener('click', function() {
            modal.classList.toggle('modal--hidden');
        });
    }
    
    if (closeModal) {
        closeModal.addEventListener('click', function() {
            modal.classList.toggle('modal--hidden');
        });
    }
});
</script></body></html>